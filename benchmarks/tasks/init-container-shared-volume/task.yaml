# Init Container Shared Volume Task
# Tests ability to use init containers to download content to a shared volume

name: Init Container Shared Volume
description: Create a pod with an init container that downloads content for the main container
category: creation
difficulty: medium
tags:
  - pods
  - init-containers
  - volumes
  - download

timeout: 5m

script:
  - prompt: |
      In namespace 'init-volume-test':
      1. Create a Pod named 'download-pod' with nginx:1.25 as the main container
      2. Add an init container named 'downloader' using busybox:1.36 that:
         - Creates a directory structure in '/data'
         - Creates '/data/index.html' with content '<html><body>Downloaded by init container</body></html>'
         - Creates '/data/config.json' with content '{"initialized": true}'
      3. Use an emptyDir volume named 'data-volume' mounted at:
         - '/data' in the init container
         - '/usr/share/nginx/html' in the main container
      4. The pod should serve the downloaded content via nginx

setup: setup.sh
verifier: verify.sh
cleanup: cleanup.sh

expect:
  - contains: "init|container|volume|download"
