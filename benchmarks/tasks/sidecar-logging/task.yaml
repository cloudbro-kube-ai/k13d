# Sidecar Logging Task
# Tests ability to implement the sidecar logging pattern

name: Sidecar Logging
description: Create a pod with a sidecar container that processes application logs
category: creation
difficulty: medium
tags:
  - pods
  - sidecar
  - logging

timeout: 5m

script:
  - prompt: |
      In namespace 'sidecar-log-test':
      1. Create a Pod named 'logging-pod' with two containers:
         - Main container 'app' using busybox:1.36 that writes logs to '/var/log/app.log' (use: sh -c "while true; do echo \"$(date) - App log entry\" >> /var/log/app.log; sleep 5; done")
         - Sidecar container 'log-shipper' using busybox:1.36 that tails the log file (use: sh -c "tail -f /var/log/app.log")
      2. Use an emptyDir volume named 'log-volume' mounted at '/var/log' in both containers
      3. Both containers should be running and sharing the log data

setup: setup.sh
verifier: verify.sh
cleanup: cleanup.sh

expect:
  - contains: "sidecar|logging|volume|tail"
