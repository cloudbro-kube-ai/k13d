# Prometheus configuration for k13d
# https://prometheus.io/docs/prometheus/latest/configuration/configuration/

global:
  scrape_interval: 15s      # Default scrape interval
  evaluation_interval: 15s  # Rule evaluation interval

  # Attach these labels to any time series or alerts when communicating with
  # external systems (federation, remote storage, Alertmanager).
  external_labels:
    monitor: 'k13d-monitor'

# Alertmanager configuration (optional)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#             - alertmanager:9093

# Rule files (optional)
# rule_files:
#   - "alert_rules.yml"

scrape_configs:
  # Prometheus self-monitoring
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    metrics_path: /metrics

  # k13d application metrics
  - job_name: 'k13d'
    static_configs:
      - targets: ['k13d:8080']
    metrics_path: /metrics
    scrape_interval: 30s
    scrape_timeout: 10s

    # Optional: relabel configs
    # relabel_configs:
    #   - source_labels: [__address__]
    #     target_label: instance
    #     replacement: 'k13d'

# Remote write configuration (optional)
# Uncomment to send metrics to remote storage like Thanos, Cortex, or Mimir
# remote_write:
#   - url: "http://remote-write-endpoint/api/v1/write"
